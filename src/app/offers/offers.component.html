<div *ngIf="isLoading">
  <app-progress-loader></app-progress-loader>
</div>
<div class="container" *ngIf="showparent&&!isLoading">
    <div class="row">
        <mat-tab-group mat-stretch-tabs="false" #tabGroup (selectedTabChange)="tabChanged($event)" [selectedIndex]="selectedTabIndex"  mat-align-tabs="center">
            <mat-tab label="Procurement"> 
                <div class="container mt-2 "
                infinite-scroll
              [infiniteScrollDistance]="scrollDistance"
              [infiniteScrollUpDistance]="scrollDistanceup"
              [infiniteScrollThrottle]="throttle"
              (scrolled)="onScrollDownProcurement()">
                    <div class="row">
                      <mat-card class="searchFactory-card col-sm-12" *ngFor="let procuremetCard of procuremetCards">
                        <div class="container">
                          <div class="row">
                            <!-- <div class="col-sm-12 d-flex p-0"> -->
                              <div class="col-sm-12 col-md-3 p-0">
                                <img mat-card-image *ngIf="(procuremetCard.vehiclePic1)!=null; else defaultImage"
                                  [src]="baseUrl+ procuremetCard.vehiclePic1" alt="{{procuremetCard.vehicleMake}}" class="left-image">
          
                                <ng-template #defaultImage>
                                  <img mat-card-image
                                    src="https://images.unsplash.com/photo-1605218403317-6caf5485d304?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                                    alt="{{procuremetCard.vehicleMake}}" class="left-image">
                                </ng-template>
                              </div>
          
                              <div class="col-sm-12 col-md-3 align-items-center d-flex">
                                <div class=" car-details">
                                  <h2>{{procuremetCard.vehicleYear}}
                                    {{procuremetCard.vehicleMake}}</h2>
                                  <p>{{procuremetCard.vehicleModel}}</p>
                                  <p>{{procuremetCard.vehicleSeries}}</p>
                                  <div class="title-color" *ngIf="procuremetCard.titleSts?.shortCode==='SLVGD_TITLE'||procuremetCard.titleSts?.shortCode==='RBLT_TITLE'">
                                    <span>{{procuremetCard.titleSts?.shortDescrip}}</span>
                                  </div>
                                </div>
                              </div>

                              <div class="col-sm-12 col-md-2 justify-content-md-center align-items-center d-flex ">
                                <div class=" car-details">
                                  <h3>{{procuremetCard.status.buyerStatus}}</h3>
                                  <h3>{{procuremetCard.createdOn}}</h3>
                                </div>
                              </div>
          
                              <div class="col-sm-12 col-md-4 align-items-center justify-content-md-center d-flex">
                                <!-- <mat-card-actions> -->
                                  <!-- <div class="appraisal-card-footer container-fluid"> -->
                                    <!-- <div class="row"> -->
                                      <div class=" d-flex justify-content-center col-sm-6">
                                        <button mat-icon-button color="primary" matTooltip="View Vehicle"
                                          matTooltipPosition="above" (click)="goToProcurementViewVehicle(procuremetCard.apprRef)">
                                          <mat-icon>directions_car</mat-icon>
                                        </button>
                                      </div>                                                   
                                      <div class="d-flex justify-content-center col-sm-6">
                                        <!-- <button mat-icon-button color="accent" matTooltip="Make Offer" matTooltipPosition="above">
                                          <mat-icon>payment</mat-icon>
                                        </button> -->
                                        <button mat-icon-button color="accent" matTooltip="Quote" matTooltipPosition="above" (click)="gotoProcuremntQuotePage(procuremetCard.offerId)">
                                            <mat-icon>request_quote</mat-icon>
                                        </button>
                                      </div>
                                    <!-- </div> -->
                                  <!-- </div> -->
                                <!-- </mat-card-actions> -->
                              </div>
                            <!-- </div> -->
                          </div>
                        </div>
                      </mat-card>
                    </div>
                  </div>
            </mat-tab>
            <mat-tab label="Liquidation">
              <div class="container"
              infinite-scroll
              [infiniteScrollDistance]="scrollDistance"
              [infiniteScrollUpDistance]="scrollDistanceup"
              [infiniteScrollThrottle]="throttle"
              (scrolled)="onScrollDownLiquidation()">
                <div class="row">
                  <mat-card class="searchFactory-card col-sm-12" *ngFor="let liquidationCard of liquidationCards">
                    <div class="container">
                      <div class="row">
                        <!-- <div class="col-sm-12 d-flex p-0"> -->
                          <div class="col-sm-12 col-md-3 p-0">
                            <img mat-card-image *ngIf="(liquidationCard.vehiclePic1)!=null; else defaultImage"
                              [src]="baseUrl+ liquidationCard.vehiclePic1" alt="{{liquidationCard.vehicleMake}}" class="left-image">
      
                            <ng-template #defaultImage>
                              <img mat-card-image
                                src="https://images.unsplash.com/photo-1605218403317-6caf5485d304?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                                alt="{{liquidationCard.vehicleMake}}" class="left-image">
                            </ng-template>
                          </div>
      
                          <div class="col-sm-12 col-md-3 align-items-center d-flex">
                            <div class=" car-details">
                              <h2>{{liquidationCard.vehicleYear}}
                                {{liquidationCard.vehicleMake}}</h2>
                              <p>{{liquidationCard.vehicleModel}}</p>
                              <p>{{liquidationCard.vehicleSeries}}</p>
                              <div class="title-color" *ngIf="liquidationCard.titleSts?.shortCode==='SLVGD_TITLE'||liquidationCard.titleSts?.shortCode==='RBLT_TITLE'">
                                <span>{{liquidationCard.titleSts?.shortDescrip}}</span>
                              </div>
                            </div>
                          </div>

                          <div class="col-sm-12 col-md-2 justify-content-md-center align-items-center d-flex ">
                            <div class=" car-details">
                              <h3>{{liquidationCard.status.sellerStatus}}</h3>
                              <h3>{{liquidationCard.createdOn}}</h3>
                              <h3>{{liquidationCard.id}}</h3>
                            </div>
                          </div>
      
                          <div class="col-sm-12 col-md-4 align-items-center justify-content-md-center d-flex">
                            <!-- <mat-card-actions> -->
                              <!-- <div class="appraisal-card-footer container-fluid">
                                <div class="row"> -->
                                  <div class="d-flex justify-content-center col-sm-6">
                                    <button mat-icon-button color="primary" matTooltip="View Vehicle"
                                      matTooltipPosition="above" (click)="goToLiquidationViewVehicle(liquidationCard.apprRef, liquidationCard.offerId)">
                                      <mat-icon>directions_car</mat-icon>
                                    </button>
                                  </div>
                                                                                       
                                  <div class="d-flex justify-content-center col-sm-6">
                                    <!-- <button mat-icon-button color="accent" matTooltip="Make Offer" matTooltipPosition="above">
                                      <mat-icon>payment</mat-icon>
                                    </button> -->
                                    <button mat-icon-button color="accent" matTooltip="Quote" matTooltipPosition="above" (click)="gotoLiquidationQuotePage(liquidationCard.offerId, liquidationCard.apprRef)">
                                        <mat-icon>request_quote</mat-icon>
                                    </button>
                                  </div>
                                <!-- </div>
                              </div> -->
                            <!-- </mat-card-actions> -->
                          </div>
                        <!-- </div> -->
                      </div>
                    </div>
                  </mat-card>
                </div>
              </div>
                
            </mat-tab>
            <mat-tab label="Trade Buy">
              <mat-tab-group mat-stretch-tabs="false" #tabGroup (selectedTabChange)="internalTabChanged($event)" [selectedIndex]="selectedTradeBuyIndex" mat-align-tabs="end">
                <mat-tab label="Available Trades">
                  <div class="container mt-2 "
                  infinite-scroll
                  [infiniteScrollDistance]="scrollDistance"
                  [infiniteScrollUpDistance]="scrollDistanceup"
                  [infiniteScrollThrottle]="throttle"
                  (scrolled)="onScrollDownTrades()">
                    <div class="row">
                      <mat-card class="searchFactory-card col-sm-12" *ngFor="let availableTradeCard of availableTradeCards">
                        <div class="container">
                          <div class="row">
                            <!-- <div class="col-sm-12 d-flex p-0"> -->
                              <div class="col-sm-12 col-md-3 p-0">
                                <img mat-card-image *ngIf="(availableTradeCard.vehiclePic1)!=null; else defaultImage"
                                  [src]="baseUrl+ availableTradeCard.vehiclePic1" alt="{{availableTradeCard.vehicleMake}}" class="left-image">
          
                                <ng-template #defaultImage>
                                  <img mat-card-image
                                    src="https://images.unsplash.com/photo-1605218403317-6caf5485d304?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                                    alt="{{availableTradeCard.vehicleMake}}" class="left-image">
                                </ng-template>
                              </div>
          
                              <div class="col-sm-12 col-md-3 align-items-center d-flex">
                                <div class=" car-details">
                                  <h2>{{availableTradeCard.vehicleYear}}
                                    {{availableTradeCard.vehicleMake}}</h2>
                                  <p>{{availableTradeCard.vehicleModel}}</p>
                                  <p>{{availableTradeCard.vehicleSeries}}</p>
                                  <div class="title-color" *ngIf="availableTradeCard.titleSts?.shortCode==='SLVGD_TITLE'||availableTradeCard.titleSts?.shortCode==='RBLT_TITLE'">
                                    <span>{{availableTradeCard.titleSts?.shortDescrip}}</span>
                                  </div>
                                </div>
                              </div>

                              <div class="col-sm-12 col-md-2 justify-content-md-center align-items-center d-flex ">
                                <div class=" car-details">
                                  <!-- <h3>{{availableTradeCard.status.offerStatus}}</h3> -->
                                  <h3>{{availableTradeCard.createdOn}}</h3>
                                </div>
                              </div>
          
                              <div class="col-sm-12 col-md-4 align-items-center justify-content-md-center d-flex">
                                <!-- <mat-card-actions> -->
                                  <!-- <div class="appraisal-card-footer container-fluid"> -->
                                    <!-- <div class="row"> -->
                                      <div class=" d-flex justify-content-center col-sm-4">
                                        <button mat-icon-button color="primary" matTooltip="View Vehicle"
                                          matTooltipPosition="above" (click)="goToTraidAvailableViewVehicle(availableTradeCard)">
                                          <mat-icon>directions_car</mat-icon>
                                        </button>
                                      </div>                                                   
                                      <div class="d-flex justify-content-center col-sm-4">
                                        <!-- <button mat-icon-button color="accent" matTooltip="Make Offer" matTooltipPosition="above">
                                          <mat-icon>payment</mat-icon>
                                        </button> -->
                                        <button *ngIf="availableTradeCard.isOfferMade" mat-icon-button color="accent" matTooltip="Quote" matTooltipPosition="above" (click)="gotoAvailableTradeQuotePage(availableTradeCard.offerId)">
                                            <mat-icon>request_quote</mat-icon>
                                        </button>
                                      </div>
                                      <div class="d-flex justify-content-center col-sm-4">
                                        <button *ngIf="!(availableTradeCard.isOfferMade)" mat-icon-button color="accent" matTooltip="Make Offer" matTooltipPosition="above"
                                        (click)="openMakeOfferDialog(availableTradeCard)" [disabled]="!able_to.can('create','Offers')">
                                          <mat-icon>payment</mat-icon>
                                        </button>
                                      </div>
                                    <!-- </div> -->
                                  <!-- </div> -->
                                <!-- </mat-card-actions> -->
                              </div>
                            <!-- </div> -->
                          </div>
                        </div>
                      </mat-card>
                    </div>
                  </div>
                </mat-tab>
                <mat-tab label="Factory Offers"> 
                  <div class="container"
                  infinite-scroll
                  [infiniteScrollDistance]="scrollDistance"
                  [infiniteScrollUpDistance]="scrollDistanceup"
                  [infiniteScrollThrottle]="throttle"
                  (scrolled)="onScrollDownOffers()">
                    <div class="row">
                      <mat-card class="searchFactory-card col-sm-12" *ngFor="let factoryOfferCard of factoryOfferCards">
                        <div class="container">
                          <div class="row">
                            <!-- <div class="col-sm-12 d-flex p-0"> -->
                              <div class="col-sm-12 col-md-3 p-0">
                                <img mat-card-image *ngIf="(factoryOfferCard.vehiclePic1)!=null; else defaultImage"
                                  [src]="baseUrl+ factoryOfferCard.vehiclePic1" alt="{{factoryOfferCard.vehicleMake}}" class="left-image">
          
                                <ng-template #defaultImage>
                                  <img mat-card-image
                                    src="https://images.unsplash.com/photo-1605218403317-6caf5485d304?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80"
                                    alt="{{factoryOfferCard.vehicleMake}}" class="left-image">
                                </ng-template>
                              </div>
          
                              <div class="col-sm-12 col-md-3 align-items-center d-flex">
                                <div class=" car-details">
                                  <h2>{{factoryOfferCard.vehicleYear}}
                                    {{factoryOfferCard.vehicleMake}}</h2>
                                  <p>{{factoryOfferCard.vehicleModel}}</p>
                                  <p>{{factoryOfferCard.vehicleSeries}}</p>
                                  <div class="title-color" *ngIf="factoryOfferCard.titleSts?.shortCode==='SLVGD_TITLE'||factoryOfferCard.titleSts?.shortCode==='RBLT_TITLE'">
                                    <span>{{factoryOfferCard.titleSts?.shortDescrip}}</span>
                                  </div>
                                </div>
                              </div>
    
                              <div class="col-sm-12 col-md-2 justify-content-md-center align-items-center d-flex ">
                                <div class=" car-details">
                                  <h3>{{factoryOfferCard.status.sellerStatus}}</h3>
                                  <h3>{{factoryOfferCard.createdOn}}</h3>
                                </div>
                              </div>
          
                              <div class="col-sm-12 col-md-4 align-items-center justify-content-md-center d-flex">
                                <!-- <mat-card-actions> -->
                                  <!-- <div class="appraisal-card-footer container-fluid">
                                    <div class="row"> -->
                                      <div class="d-flex justify-content-center col-sm-6">
                                        <button mat-icon-button color="primary" matTooltip="View Vehicle"
                                          matTooltipPosition="above" (click)="goToTraidFactViewVehicle(factoryOfferCard.apprRef,factoryOfferCard.offerId)">
                                          <mat-icon>directions_car</mat-icon>
                                        </button>
                                      </div>
                                                                                           
                                      <div class="d-flex justify-content-center col-sm-6">
                                        <!-- <button mat-icon-button color="accent" matTooltip="Make Offer" matTooltipPosition="above">
                                          <mat-icon>payment</mat-icon>
                                        </button> -->
                                        <button mat-icon-button color="accent" matTooltip="Quote" matTooltipPosition="above" (click)="gotoFactoryOffersQuotePage(factoryOfferCard.offerId, factoryOfferCard.apprRef)">
                                            <mat-icon>request_quote</mat-icon>
                                        </button>
                                      </div>
                                    <!-- </div>
                                  </div> -->
                                <!-- </mat-card-actions> -->
                              </div>
                            <!-- </div> -->
                          </div>
                        </div>
                      </mat-card>
                    </div>
                  </div>

                 
                </mat-tab>
                <!-- <mat-tab class="mat-tab-body" label="Third"> Content 3 </mat-tab> -->
              </mat-tab-group>
            
            </mat-tab>
        </mat-tab-group>
    </div>
</div>

<div class="container-fluid" *ngIf="!showparent">
  <div class="row">
    <router-outlet></router-outlet>
  </div>
</div>